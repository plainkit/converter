<!DOCTYPE html>
<html xmlns:x-transition="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <title>Alpine.js Example</title>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body>
    <div class="container">
        <h1>Alpine.js Interactive Example</h1>

        <!-- Simple counter -->
        <div x-data="{ count: 0 }">
            <button @click="count++">+</button>
            <span x-text="count"></span>
            <button @click="count--">-</button>
        </div>

        <!-- Toggle visibility -->
        <div x-data="{ open: false }">
            <button @click="open = !open" x-text="open ? 'Hide' : 'Show'"></button>
            <div x-show="open" x-transition>
                <p>This content can be toggled!</p>
            </div>
        </div>

        <!-- Form with validation -->
        <div x-data="{
            email: '',
            isValid: false,
            validate() {
                this.isValid = this.email.includes('@')
            }
        }">
            <form @submit.prevent="alert('Form submitted!')">
                <input type="email"
                       x-model="email"
                       @input="validate()"
                       placeholder="Enter email"
                       :class="{ 'valid': isValid, 'invalid': email && !isValid }">
                <button type="submit" :disabled="!isValid">Submit</button>
            </form>
            <p x-show="email && !isValid" x-transition>Please enter a valid email</p>
        </div>

        <!-- Todo list -->
        <div x-data="{
            todos: ['Learn Alpine.js', 'Build awesome apps'],
            newTodo: '',
            addTodo() {
                if (this.newTodo.trim()) {
                    this.todos.push(this.newTodo);
                    this.newTodo = '';
                }
            },
            removeTodo(index) {
                this.todos.splice(index, 1);
            }
        }">
            <h3>Todo List</h3>
            <form @submit.prevent="addTodo()">
                <input type="text" x-model="newTodo" placeholder="Add todo...">
                <button type="submit">Add</button>
            </form>

            <ul>
                <template x-for="(todo, index) in todos" :key="index">
                    <li>
                        <span x-text="todo"></span>
                        <button @click="removeTodo(index)">Remove</button>
                    </li>
                </template>
            </ul>
        </div>

        <!-- Dropdown menu -->
        <div x-data="{ open: false }" class="dropdown">
            <button @click="open = !open"
                    aria-expanded="open"
                    aria-haspopup="true">
                Options
            </button>

            <div x-show="open"
                 @click.away="open = false"
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 scale-95"
                 x-transition:enter-end="opacity-100 scale-100"
                 x-transition:leave="transition ease-in duration-150"
                 x-transition:leave-start="opacity-100 scale-100"
                 x-transition:leave-end="opacity-0 scale-95">
                <a href="#" @click="open = false">Option 1</a>
                <a href="#" @click="open = false">Option 2</a>
                <a href="#" @click="open = false">Option 3</a>
            </div>
        </div>

        <!-- Data fetching -->
        <div x-data="{
            loading: false,
            data: null,
            async fetchData() {
                this.loading = true;
                try {
                    const response = await fetch('/api/data');
                    this.data = await response.json();
                } finally {
                    this.loading = false;
                }
            }
        }" x-init="fetchData()">
            <div x-show="loading">Loading...</div>
            <div x-show="!loading && data" x-text="data?.message"></div>
        </div>
    </div>
</body>
</html>
